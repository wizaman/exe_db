# データ仕様共通ポリシー

共有可能なデータベースとしての立場を取るため、統一された仕様を規定できることを考えます。

## null禁止

値として `null` を持たない仕様に統一する。 `null` が含まれていたら不具合です。

例えば、リストを提供すべきところで中身がないときは `[]` をデータとして持たせるようにします。

## ID定義

各データを識別するための文字列によるIDを独自に定義します。タイトル内で異なる種別のデータを混ぜても区別できるような形式を考えます。

具体的には、接頭辞+数値+接尾辞の形式で表し、接頭辞でカテゴリの区別がつくようにします。接尾辞はマイナーチェンジが必要なときにつけます。数値は各区分に合わせて桁数は揃えます（例えばバトルチップは3桁確保してゼロパディング）。

これによってIDに対応するWebページなどのファイルを同階層に置くことができることを想定しています。そのため、識別できる最低限の情報に留めて、頻繁な仕様変更はしないよう努めます。

アルファベットは大文字で統一するので、ファイル名への利用などで都合が悪い場合は小文字に変換してください。

## SortId定義

ソートに利用できるよう数値によるIDを独自に定義します。

こちらはソートに都合のよいように柔軟に仕様を変更する可能性があるため、通常のIDと違って値を保守することを重要視しません。

## 順序保証

リストで値を持つもの（例えばバトルチップの特性）についても順序保証したデータを提供するよう努めます。

## 扱わないもの

扱わない情報の考え方や例を示します。

現在、扱っていない情報の中でも、データベース化可能で有用なものと判断できるものがあれば取り扱いを検討します。

### 個別の詳細仕様

下記のような個別仕様などリスト化・データ化が難しい情報については取り扱いません。

- バトルチップ効果の説明
- 条件によって変動する攻撃力表示
  - 範囲指定するような定義をするとデータ処理側に分岐処理を要求するなど複雑化する。
    - 何に由来して範囲が定まるのかが個別仕様のため統一的に取り扱うことができず、処理側でも扱いに困る。
  - ナビチップSPの攻撃力はデリートタイムのレコードによって変動するが、実用上は最高火力が大事なため最大値で統一する。
    - 詳細定義するなら、デリートタイムごとの攻撃力テーブルを定義するべきだが、これも需要に対して設計するコストが見合わない。
  - ナビチップDSの攻撃力はエグゼ4とエグゼ5で異なる仕様によって変動するが、これも意味のある代表値を決定するのは難しいので、ナビチップSPに倣って最大値で統一する。
    - エグゼ4はダークホールの数に依存する。
    - エグゼ5はのけぞった回数に依存する。
- 共通仕様として提示できないバトルチップの効果量
  - 回復量
    - リカバリー系に限定して取り扱ってもよいが、自明なので対応しなくて良い考え。
  - 攻撃力表示のないダメージ量
    - 毒系やガンデルソル系などのスリップダメージ
    - エリアスチール・パネルスチールの直撃など特殊ケースで発生するダメージ
    - エグゼ4以降のスチールパニシュ系（攻撃力表示がなくなって数値付加の対象外になった）
  - 効果時間
    - インビジブルなどの効果時間
    - 状態異常の効果時間
    - オウエンカの演奏間隔
  - 吹っ飛び効果量
    - 吹っ飛び効果を持つものであっても、1マス後退であったり、最後方まで後退であったり種類があるが、区別しない。
  - 単純な仕様に対して「効果量」のようなカラムを検討する余地はあるが、時間が絡むと単位に困るので原則扱いたくない。
- バトルチップの追加効果の詳細
  - 複数種類の攻撃が含まれるなど条件付きで追加効果が変わるものについて区別すること。
    - 統一した説明ができないので、基本性能として一律掲載することにする。
    - 条件付き効果を別カラムに分ける妥協案も考えられるが、処理側が複雑化する上、条件が個別仕様のため結局個別に補足説明するならデータベースで厳密に取り扱う需要が低いと考えられる。

- 置き物・障害物の詳細な定義
  - バトルチップ由来でないものもあるため、専用のテーブル設計が必要になってコストに見合わない。

### 低重要度で膨大な情報

下記のような情報量が膨大で定義が難しく、あまり参照されない（需要が低い）情報についても取り扱いません。

- 敵の攻撃性能詳細

